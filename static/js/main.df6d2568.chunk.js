(this.webpackJsonpwhosi=this.webpackJsonpwhosi||[]).push([[0],{12:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l}));const r="__",n="__",c=["configs","dictionary","countries"],o={home:"0"},_={chartId:"chart_id",sourceGid:"source_gid",element:"element",displayName:"display_name",capPercentage:"cap_percentage",percentageDecimals:"percentage_decimals",coarseIntegerFormatting:"coarse_integer_formatting",colorOverride:"color_override",chartType:"chart_type",modelled:"modelled",formula:"formula",hidden:"hidden",valueField:"value_field",percentage:"percentage"},s={country_iso_code:"country_iso_code",sourceYear:"source_year",value:"value",year:"year",indicator:"indicator",indicator_description:"indicator_description",sex:"sex",age:"age",population_segment:"population_segment",population_sub_group:"population_sub_group",country_name:"country_name",area_name:"area_name",geographic_scope:"geographic_scope",value_upper:"value_upper",value_lower:"value_lower",value_comment:"value_comment",unit_format:"unit_format",source_organization:"source_organization",source_database:"source_database",source_display:"source_display",notes:"notes",modality:"modality",modality_category:"modality_category",import_file:"import_file",import_timestamp:"import_timestamp",row_id:"row_id",suppressed:"suppressed"},l={DISPLAY_NAME:"DISPLAY_NAME",DISPLAY_VALUE:"DISPLAY_VALUE",DISPLAY_VALUE_LOWER:"DISPLAY_".concat(s.value_lower.toUpperCase()),DISPLAY_VALUE_UPPER:"DISPLAY_".concat(s.value_upper.toUpperCase())}},25:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return _})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return d}));var r=a(19);const n=r.v,c=r.k,o=r.g,_=[[r.p,r.h,r.r],[r.z,r.k,r.g],[r.w,r.d,r.A,r.v]],s=8,l=11,i=[r.z,r.t,r.e,r.q,r.r,r.s,r.A,r.k,r.b,r.f,r.y,r.j,r.h,r.p,r.d,r.w,r.n,r.l,r.B,r.a,r.i,r.m,r.x,r.u,r.o,r.v,r.g,r.c],d=(e,t)=>{if("string"===typeof e)return e;return e[Object.keys(e)[0].replace(/\d/,"")+t]}},30:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"k",(function(){return getUrl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return configParser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return filterByCountryGenerator})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getElements})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getFieldBoolean})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getFormula})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getBounds})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getColors})),__webpack_require__.d(__webpack_exports__,"l",(function(){return transformYearRange})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDataPoint})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCalculatedDataPoint}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_consts_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),_consts_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),_display__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(44);const SPECIAL_FILTERS_MAP={_NONE_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.negate(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity),_SOMETHING_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity,_ANY_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.stubTrue},defaultCompFn=(e,t)=>e.toLowerCase()===t.toLowerCase(),getUrl=e=>"https://docs.google.com/spreadsheets/d/e/2PACX-1vSAEOXOt5aHDcb35lpCsSO5AvHTZPplXHrHGaIXTJjCtW_B96D0MOItWZLGv1j4lagTxnuVClms6M0X/pub?gid=".concat(e,"&single=true&output=csv"),configParser=e=>{if(e[_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.chartId])return delete e[""],lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(e,((t,a)=>{""===t&&delete e[a]})),e},filterByCountryGenerator=e=>t=>t[_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.country_iso_code]===e?t:null,getElements=e=>Object.keys(e).filter((e=>"all"!==e&&!e.startsWith("_key_"))),getSetting=e=>{let{element:t="all",chartConfigsMap:a,field:r,chartId:n="all"}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[n,t,0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[n,"all",0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,["all",0,r])},getField=e=>{let{element:t="all",chartConfig:a,field:r}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[t,0,r])},getFieldBoolean=e=>{let{element:t="all",chartConfig:a,field:r}=e;return!!getField({element:t,chartConfig:a,field:r})},getFormula=e=>{let{element:t,chartConfig:a}=e;return getField({element:t,chartConfig:a,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.formula})},getBounds=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_lower]:t,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_upper]:a}=e;if(parseFloat(t)&&parseFloat(a))return[parseFloat(t),parseFloat(a)]},getColors=e=>{let{chartSettings:t,chartConfig:a,chartElements:r}=e,n=parseInt(Math.abs(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.colorOverride)));n=((n||1)-1)%_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a.length;const c=_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a[n],o=r.map(((e,t)=>getField({chartConfig:a,element:e,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.colorOverride})||c[t%c.length]));return"nested"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.chartType)&&o.push(c[r.length%c.length]),o},transformYearRange=e=>{const t=/\[(\d+)-(\d+)\]/.exec(e);if(!t||!t.length>1)return[];const a=parseInt(t[1]),r=parseInt(t[2]);return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.range(a,r+1).map(String)},getFilter=e=>{let{chartId:t,element:a,year:r=null,selectedIso:n,chartConfigsMap:c}=e;const o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,"all[0]",{}),_=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,[t,"all",0],{}),[s,...l]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,[t,a],[{}]),i={...o,..._,...s,selectedIso:n};return r&&(i.year=r),i},getRow=e=>{let{filter:t,chartSourceData:a}=e;const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(a,(e=>lodash__WEBPACK_IMPORTED_MODULE_0___default.a.every(t,((t,a)=>{if(!_consts_data__WEBPACK_IMPORTED_MODULE_2__.c[a])return!0;const r=e[a]||"";return!!(SPECIAL_FILTERS_MAP[t]||defaultCompFn)(r,t)}))));return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.maxBy(r,(e=>Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.year,0))+Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.sourceYear,0))/1e4))},getDataPoint=e=>{let{chartId:t,element:a,year:r=null,selectedIso:n,chartConfigsMap:c,chartSourceData:o}=e;const _=getFilter({chartId:t,element:a,year:r,selectedIso:n,chartConfigsMap:c,chartSourceData:o}),s=getRow({filter:_,chartSourceData:o}),l=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(_,_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.valueField,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value);let i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(s,l,null);if(!s||!i)return{};const d=getField({element:a,chartConfig:c[t],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.displayName});return d&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(s,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.DISPLAY_NAME,d),l&&l!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value?{row:s,value:i}:capAndFormat({row:s,value:i,chartConfigsMap:c,chartId:t,element:a})},capAndFormat=e=>{let{row:t,value:a,chartConfigsMap:r,chartId:n,element:c}=e,o=a;if(getFieldBoolean({chartConfig:r[n],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.percentage})){const e={cap:getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.capPercentage}),decimals:getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.percentageDecimals})};o=Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(a,e),a=Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(a,e),_display__WEBPACK_IMPORTED_MODULE_3__.a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value,a),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_upper].forEach((a=>{const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,a);r&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(a.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(r,e));const n=r&&Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(r,e);n&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,a,n)}))}else{const e=!!getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.coarseIntegerFormatting});o=Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a,{coarseFormatting:e}),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.c.value_upper].forEach((e=>{let a=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,e);a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(e.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a))}))}return o&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.DISPLAY_VALUE,o),{row:t,value:a}},getCalculatedDataPoint=_ref10=>{let{chartConfigsMap:chartConfigsMap,element:element,dataPoints:dataPoints,chartId:chartId}=_ref10;const chartConfig=chartConfigsMap[chartId],rawFormula=getFormula({element:element,chartConfig:chartConfig});let convertedFormula=rawFormula;lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(dataPoints,((e,t)=>{convertedFormula=convertedFormula.replace(t,e)}));let result=null;try{result=eval(convertedFormula)}catch(error){return console.warn("cannot evaluate ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null}}if(!/^[\d-+*\/\.]+$/.test(convertedFormula)||!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(result))return console.warn("missing values for ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null};const displayName=getField({element:element,chartConfig:chartConfig,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.b.displayName})||element;return capAndFormat({value:result,row:{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.DISPLAY_NAME]:displayName},chartConfigsMap:chartConfigsMap,chartId:chartId,element:element})}},378:function(e,t,a){"use strict";a.r(t);var r=a(45),n=a(0),c=a.n(n),o=a(6),_=a.n(o),s=a(441),l=a(12),i=a(30);const d=_.a.memoize((async function(e){return await Object(s.a)(Object(i.k)(e)).catch((e=>{console.error("error in getChartOrTable()): ",e)}))}));async function u(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return await Promise.all(a.map((e=>async function(e){let{chartConfigsMap:t,chartId:a,selectedIso:r}=e;const n=t[a],c=_.a.get(n,"all[0]");if(!n||!c||!c[l.b.sourceGid])return console.warn("skipping chart: ",a),null;const o=await async function(e,t){return(await d(e)).filter((e=>Object(i.b)(t)(e)))}(c[l.b.sourceGid],r),s={table:p,text:h};return _.a.get(s,c[l.b.chartType],g)({chartId:a,chartSettings:c,chartConfigsMap:t,chartSourceData:o,selectedIso:r})}({chartConfigsMap:t,chartId:e,selectedIso:r})))).catch((e=>{console.error("error in getCharts(): ",e)}))}function h(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;console.log(t,a,r,n,c);const o=Object(i.g)(r[t]),s={};return _.a.each(o,(e=>{const{row:a,value:o}=Object(i.f)({chartId:t,element:e,selectedIso:c,chartConfigsMap:r,chartSourceData:n});s[e]=o,s["".concat(e,"_row")]=a})),{textValues:s,chartId:t,countryIso:c,elements:o,type:_.a.get(a,l.b.chartType),name:_.a.get(a,l.b.displayName,t)}}function p(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;const o=r[t],s=Object(i.g)(o),d={},u=Object(i.i)({chartConfig:o,field:l.b.percentage});_.a.each(s,(e=>{const{row:a,value:o}=Object(i.f)({chartId:t,element:e,selectedIso:c,chartConfigsMap:r,chartSourceData:n});d[e]=o,d[e+"_row"]=a}));const h=_.a.uniq(s.map((e=>e.split(l.g)[0]))),p=_.a.uniq(s.map((e=>e.split(l.g)[1])));return{data:h.map((e=>({row:_.a.get(o,["_key_".concat(e),0,l.b.displayName],e),values:p.map((t=>({column:_.a.get(o,["_key_".concat(t),0,l.b.displayName],t),value:_.a.get(d,"".concat(e).concat(l.g).concat(t)),sheetRow:_.a.get(d,"".concat(e).concat(l.g).concat(t,"_row"))})))}))),chartId:t,countryIso:c,elements:s,isPercentage:u,type:_.a.get(a,l.b.chartType),name:_.a.get(a,l.b.displayName,t)}}function g(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;const o=r[t],s=Object(i.g)(o),d=s.filter((e=>!Object(i.i)({element:e,chartConfig:o,field:l.b.hidden}))),u=_.a.get(o,["all",0,l.c.year]),h=u,p=h?Object(i.l)(u):["all"],g=_.a.map(p,(e=>{const a={};return _.a.each(s,(_=>{if(Object(i.j)({element:_,chartConfig:o}))return null;const{row:s,value:l}=Object(i.f)({chartId:t,element:_,year:h?e:null,selectedIso:c,chartConfigsMap:r,chartSourceData:n});a[_]=l,a[_+"_row"]=s,a[_+"_bounds"]=Object(i.c)(s)})),_.a.each(s,(e=>{if(!Object(i.j)({element:e,chartConfig:o}))return null;const{row:n,value:c}=Object(i.d)({chartId:t,element:e,chartConfigsMap:r,dataPoints:a});a[e]=c,a[e+"_row"]=n})),_.a.each(s,(e=>{Object(i.i)({element:e,chartConfig:o,field:l.b.hidden})&&delete a[e]})),a.name=e,a})),O={};_.a.each(d,(e=>O[e]=Object(i.h)({element:e,chartConfig:r[t],field:l.b.displayName})));const f=Object(i.e)({chartSettings:a,chartConfig:o,chartElements:d});return{data:h?g:g[0],chartId:t,countryIso:c,elements:d,elementNameMap:O,colors:f,isPercentage:Object(i.i)({chartConfig:o,field:l.b.percentage}),type:_.a.get(a,l.b.chartType),name:_.a.get(a,l.b.displayName,t)}}async function O(){await async function(){if(l.a.every((e=>!!l.e[e])))return;const e=await Object(s.a)(Object(i.k)(l.e.home)).catch((e=>{console.error("error in csv(getUrl(GID_MAP.home)): ",e)}));l.a.forEach((t=>{const a=_.a.findLast(e,(e=>!!e[t]));a?l.e[t]=a[t]:console.error("No Sheet GID found for: ",t)}))}().catch((e=>{console.error("error in setConfigGids(): ",e)}));const e=await Object(s.a)(Object(i.k)(l.e.dictionary)).catch((e=>console.error("error in getDictionary: ",e))),t=await Object(s.a)(Object(i.k)(l.e.countries)).catch((e=>console.error("error in getcountries: ",e))),{chartConfigsMap:a,chartIds:r}=await async function(){const e=await Object(s.a)(Object(i.k)(l.e.configs),i.a).catch((e=>{console.error("error in csv(getUrl(GID_MAP.configs), configParser): ",e)})),t=_.a.groupBy(e,l.b.chartId),a=_.a.uniqBy(e,"chart_id").map((e=>e.chart_id)).filter((e=>"all"!==e)),r=_.a.mapValues(t,((e,t)=>"all"===t?e:_.a.groupBy(e,l.b.element)));return _.a.each(r,((e,t)=>{"all"!==t&&_.a.each(e,((e,t)=>{}))})),{chartConfigsMap:r,chartIds:a}}().catch((e=>console.error("error in getChartConfigs(): ",e)));return console.log("@@@ ALL CONFIGS: "),console.log(a),{dictionary:e,countries:t,chartConfigsMap:a,chartIds:r}}var f=a(25),b=a(74),m=a(447),E=a(450),j=a(448),M=a(429),P=a(449),D=a(444),I=a(445),x=a(438),C=a(439),y=a(1);const A=e=>{let{handleCountryChange:t,selectedIso:a,countries:r}=e;return Object(y.jsxs)(D.a,{sx:{width:300,marginTop:1,marginBottom:1},children:[Object(y.jsx)(I.a,{id:"country",children:"Country"}),Object(y.jsxs)(x.a,{labelId:"country",id:"country-select",value:a||"home",label:"Country",onChange:t,children:[Object(y.jsx)(C.a,{value:"home",children:"Select a country..."}),r.map((e=>{let{iso:t,name:a}=e;return Object(y.jsx)(C.a,{value:t,children:a},t)}))]})]})},v=e=>{let{selectedIso:t,handleCountryChange:a,countries:r}=e;return Object(y.jsx)(M.a,{sx:{flexGrow:1},children:Object(y.jsx)(j.a,{position:"fixed",sx:{background:Object(f.c)(f.d,7)},children:Object(y.jsx)(P.a,{children:Object(y.jsx)(A,{countries:r,handleCountryChange:a,selectedIso:t})})})})};var w=a(431),L=a(128),T=a(435),B=a(129),U=a(442),R=a(443),W=a(436),K=a(91),S=a(92),k=a(138),F=a(111),N=a(430),Y=a(75),q=a(454),G=a(456),H=a(451),V=a(453),z=a(455),X=a(452);const J=.2,Z=.1,$=.7,Q=.1,ee=.16,te=1.1,ae=null,re=(e,t)=>{let{capValue:a}=t;return e?a&&e>a?">".concat(100*a,"%"):"".concat(Math.round(100*e),"%"):"Unknown %"};var ne=e=>{let{ratios:t,fillColors:a,textColors:r,content:n,firstSide:c=100,horizontal:o=!0,classes:s="",getInnerText:l=re,bufferRatio:i=J,textBufferRatio:d=Z,defaultRatio:u=$,capValue:h=ae,fontSizeRatio:p=Q,headerFontSizeRatio:g=ee,lineHeight:O=te}=e;const f=(e,t)=>o?t:e,b=c*(1+i),m=c*(1+d);let E=c,j=0,M=0;const P=c*p,D=c*g,I=[],x=[],C=[];_.a.each(t,((e,c)=>{const o=l(e,{capValue:h});e=e||u,h&&e>h&&(e=h);const s=a[c],i=a[c+1],d=r[c+1];I.push(Object(y.jsx)("rect",{x:f(j,M),y:f(M,j),width:E,height:E,fill:s}));const{below:p=[]}=_.a.get(n,c,{}),g=Object(y.jsxs)("text",{fontSize:P,y:f(M+P,m+P),children:[Object(y.jsx)("tspan",{className:"percent",x:f(m,M),style:{fill:d,fontSize:D},children:o}),p.map(((e,t)=>Object(y.jsx)("tspan",{className:"description",x:f(m,M),dy:P*O,children:e},c+t)))]});x.push(g);let A=E*e;const v=(E-A)/2;if(j+=v,M+=v,E=A,I.push(Object(y.jsx)("rect",{x:f(j,M),y:f(M,j),width:E,height:E,fill:i})),c===t.length-1)return;const w={strokeWidth:".4",strokeDasharray:".8 1"},L=Object(y.jsx)("line",{style:w,stroke:i,x1:f(j,M+E),x2:f(j,M+b),y1:f(M+E,j),y2:f(M+b,j)}),T=Object(y.jsx)("line",{style:w,stroke:i,x1:f(j+E,M+E),x2:f(j+E,M+b),y1:f(M+E,j+E),y2:f(M+b,j+E)});C.push(L,T),M+=b}));const A=c+(m+c),v=M+c,w=M+b,L=m+(D+5*P),T="nested-boxes "+s;return Object(y.jsx)("div",{className:T,children:Object(y.jsxs)("svg",{viewBox:"0 -2 ".concat(f(A,w)," ").concat(f(v,L)),children:[I,x,C]})})},ce=a(44),oe=a(437);const _e=e=>{let{active:t,payload:a,label:r,isArea:n}=e;if(t&&a&&a.length){const e=n?a:_.a.sortBy(a,"value");let t=null;return Object(y.jsxs)(N.a,{sx:{background:"white",p:2},className:"custom-tooltip",children:[Object(y.jsx)("strong",{className:"label",children:r}),e.reverse().map((e=>{if(e.dataKey.includes("_bounds"))return;const a=_.a.get(e.payload,e.dataKey+"_bounds",[]),r=[l.c.value_lower,l.c.value_upper].map(((t,r)=>_.a.get(e.payload,[e.dataKey+"_row","DISPLAY_".concat(t.toUpperCase())],a[r]))),n=_.a.get(e.payload,[e.dataKey+"_row",l.d.DISPLAY_VALUE],e.value);return t=t||_.a.get(e.payload,[e.dataKey+"_row",l.c.source_display])||_.a.get(e.payload,[e.dataKey+"_row",l.c.source_database]),Object(y.jsxs)(E.a,{children:[Object(y.jsx)("svg",{width:"18",viewBox:"0 0 160 100",xmlns:"http://www.w3.org/2000/svg",children:Object(y.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:e.fill})}),e.name,": ",n," ",!!a.length&&"(".concat(r.join(" - "),")")]},e.dataKey)})),t&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("br",{}),Object(y.jsx)("u",{children:"Source"}),": ",t]})]})}return null},se=e=>{let{selectedIso:t,chartData:a,countries:r}=e;const[n,o]=c.a.useState({}),s=e=>{const{data:t,chartId:a,elements:r,type:c,isPercentage:s,colors:l,elementNameMap:i}=e,d="area"===c,[,u]=d?[w.a,L.a]:[T.a,B.a],h=s?e=>Object(ce.c)(e):e=>Object(ce.b)(e),p=e=>_.a.get(i,e,e);return Object(y.jsx)(U.a,{width:"99%",aspect:1.25,maxHeight:400,children:Object(y.jsxs)(R.a,{data:t,margin:{top:30,right:30,left:0,bottom:0},children:[Object(y.jsx)(W.a,{strokeDasharray:"3 3"}),Object(y.jsx)(K.a,{dataKey:"name"}),Object(y.jsx)(S.a,{width:80,domain:s?[0,100]:void 0,tickFormatter:h}),Object(y.jsx)(k.a,{cursor:{stroke:Object(f.c)(f.h,10),strokeWidth:1},content:Object(y.jsx)(_e,{isArea:d})}),Object(y.jsx)(F.a,{onClick:e=>{console.log(e.dataKey);const t=_.a.cloneDeep(n),r=_.a.get(t,[a,e.dataKey],!1);_.a.set(t,[a,e.dataKey],!r),o(t)},iconSize:d?8:14,iconType:d&&"circle"}),r.map(((e,r)=>!d&&_.a.some(t,(t=>_.a.get(t,[e+"_bounds"],[]).length))?Object(y.jsx)(L.a,{dataKey:e+"_bounds",hide:_.a.get(n,[a,e],!1),legendType:"none",tooltipType:"none",stroke:Object(f.c)(l[r],f.f-3),fill:Object(f.c)(l[r],f.b-3)},r+"_b"):null)),r.map(((e,t)=>Object(y.jsx)(u,{dataKey:e,name:p(e),hide:_.a.get(n,[a,e],!1),stackId:d?1:t+1e3,stroke:Object(f.c)(l[t],f.f),fill:Object(f.c)(l[t],f.b)},t)))]})})},i=e=>{const{data:t}=e,a=t[0].values.map((e=>{let{column:t}=e;return Object(y.jsx)(H.a,{scope:"col",children:t},t)})),r=t.map((e=>{let{row:t,values:a}=e;return Object(y.jsxs)(X.a,{children:[Object(y.jsx)(H.a,{scope:"row",component:"th",children:t}),a.map((e=>{let{value:t,column:a,sheetRow:r}=e;return Object(y.jsx)(H.a,{children:_.a.get(r,l.d.DISPLAY_VALUE,t)||"N/A"},a)}))]},t)}));return Object(y.jsx)(U.a,{children:Object(y.jsx)(V.a,{children:Object(y.jsxs)(q.a,{sx:{"& tbody tr:nth-of-type(odd)":{background:Object(f.c)(f.g,6)},"& td, & thead th":{textAlign:"right"}},children:[Object(y.jsx)(z.a,{children:Object(y.jsxs)(X.a,{children:[Object(y.jsx)(H.a,{scope:"col"}),a]})}),Object(y.jsx)(G.a,{children:r})]})})})},d=e=>{const t=Object(Y.a)(),a=Object(oe.a)(t.breakpoints.down("sm")),{data:r,elements:n,colors:c,elementNameMap:o}=(Object(oe.a)(t.breakpoints.up("md")),e),_=n.map((e=>{const t=r[e];return t&&t/100})),s=n.map((e=>({below:o[e].split(l.f)})));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ne,{title:"title",bufferRatio:a?.2:.8,lineHeight:a?1.1:1.4,textBufferRatio:.2,firstSide:20,horizontal:!a,ratios:_,fillColors:c.map((e=>Object(f.c)(e,8))),textColors:c.map((e=>Object(f.c)(e,9))),content:s}),Object(y.jsx)("br",{})]})},u=e=>{const a=r.find((e=>e.iso===t));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(E.a,{variant:"h2",component:"h1",sx:{fontWeight:500,lineHeight:1,fontSize:{lg:"6rem"},maxWidth:{lg:760,xl:"100%"},mb:{sm:1,lg:2}},children:a&&a.name}),Object(y.jsx)(N.a,{sx:{display:{sm:"flex"},"& dl:not(:last-child)":{mr:{sm:4,md:10}},"& dt h2":{fontWeight:100,letterSpacing:".8px",textTransform:"uppercase"},"& dt, dd":{m:0}},children:e.elements.map((t=>Object(y.jsxs)("dl",{children:[Object(y.jsx)("dt",{children:Object(y.jsx)(E.a,{variant:"h6",component:"h2",children:_.a.get(e,["textValues","".concat(t,"_row"),l.d.DISPLAY_NAME],"")})}),Object(y.jsx)("dd",{children:Object(y.jsx)(E.a,{variant:"h4",component:"h2",children:_.a.get(e,["textValues","".concat(t,"_row"),l.d.DISPLAY_VALUE],e.textValues[t])})})]},t)))})]})};return Object(y.jsx)(N.a,{display:"flex",flexWrap:"wrap",pt:8,sx:{justifyContent:{xs:"space-evenly",md:"space-between"}},children:a.map((e=>{if(!e)return null;const{type:t,chartId:a,name:r}=e;return"intro"===a?Object(y.jsx)(N.a,{sx:{flexBasis:{xs:"100%",xl:600},flexGrow:{xl:0},p:3},children:u(e)},a):"table"===t?Object(y.jsxs)(N.a,{sx:{flexBasis:"100%",maxWidth:864,p:3},children:[Object(y.jsx)(E.a,{variant:"h5",component:"h3",children:r}),i(e)]},a):"nested"===t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(N.a,{sx:{flexBasis:{xs:"100%",xl:700},flexGrow:{xl:1},flexShrink:{xl:1},mr:"auto",ml:{xl:"auto"},maxWidth:864,p:3},children:[Object(y.jsx)(E.a,{pb:3,variant:"h5",component:"h3",children:r}),d(e)]},a),Object(y.jsx)(N.a,{sx:{flexBasis:"100%",height:0}})]}):Object(y.jsxs)(N.a,{sx:{width:"100%",maxWidth:{md:"44%",xl:"29%"},p:3},children:[Object(y.jsx)(E.a,{variant:"h5",component:"h3",children:r}),s(e)]},a)}))})},le=["\nOverview: The WHO Differentiated Services Delivery Strategic Initiatives dashboard brings together data on HIV testing services from various sources into one visual tool. We would like to acknowledge the support of the Ministries of Health of Member States, UNAIDS, the Bill and Melinda Gates Foundation, the President\u2019s Emergency Programme for AIDS Relief (PEPFAR), USAID, the World Health Organization, and the Global Fund to Fight AIDS, Tuberculosis and Malaria. This project aims to provide local level data for in country action for policy-makers, programme directors, outreach workers and community activists among others. The most recent data available has been collected from the relevant organisation including UNAIDS (Spectrum estimates, Global AIDS Monitoring and the Key Population Atlas), UNPOP, UNICEF and the World Bank. USAID/PEPFAR have kindly provided HIV testing data by approach. Data gaps have been filled (where possible) by reviewing publicly available sources, most notably from Ministries of Health and PEPFAR country operational plans. All dashboards have been viewed and approved by the Ministries of Health. This dashboard does not cover in-depth policy information, PrEP or paediatric HIV testing but includes links to relevant sites that do cover this information.","Contact: Cheryl Case Johnson (johnsonc@who.int)"];function ie(){const[e,t]=c.a.useState(null),[a,r]=c.a.useState([]),[n,o]=c.a.useState([]),[s,l]=c.a.useState([]),[i,d]=c.a.useState([]),[h,p]=c.a.useState(null);c.a.useEffect((()=>{O().then((e=>{o(e.dictionary.filter((e=>e.term&&e.definition))),l(e.countries.filter((e=>e.iso&&e.name))),d(e.chartIds),p(e.chartConfigsMap)}))}),[]),c.a.useEffect((()=>{e&&async function(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return{charts:await u({chartConfigsMap:t,chartIds:a,selectedIso:r}).catch((e=>{console.error("error in getCharts(selectedIso): ",e)}))}}({chartConfigsMap:h,chartIds:i,selectedIso:e}).then((e=>{console.log("@@@ ALL DATA: "),console.log(e.charts),r(e.charts)}))}),[e]);const g=!_.a.some(a,(t=>t&&t.countryIso===e)),j=Object(b.a)();return Object(y.jsxs)(m.a,{elevation:0,sx:{background:Object(f.c)(f.g,3),color:Object(f.c)(f.g,12),fontFamily:j.typography.fontFamily,p:{lg:6}},children:[Object(y.jsx)(v,{countries:s,handleCountryChange:e=>{const a=e.target.value,r=_.a.some(s,(e=>{let{iso:t}=e;return t===a}));t(r?a:null)},selectedIso:e}),Object(y.jsx)("br",{}),e?g?Object(y.jsx)(N.a,{pt:"50vh",children:Object(y.jsx)(E.a,{variant:"body1",sx:{textAlign:"center"},dangerouslySetInnerHTML:{__html:"loading..."}})}):Object(y.jsx)(se,{countries:s,selectedIso:e,chartData:a}):Object(y.jsx)(N.a,{pt:"20vh",children:le.map(((e,t)=>Object(y.jsx)(E.a,{variant:"body1",sx:{maxWidth:600,margin:"auto"},pt:2,px:3,dangerouslySetInnerHTML:{__html:e}},t)))}),!!n.length&&!g&&Object(y.jsxs)(N.a,{sx:{px:{xs:3,lg:10},mx:{lg:5},mb:{lg:5},py:9,mt:9,background:j.palette.background.paper},children:[Object(y.jsx)(E.a,{variant:"h4",component:"h2",dangerouslySetInnerHTML:{__html:"Glossary"}}),Object(y.jsx)(N.a,{sx:{columnCount:{md:2,xl:3},columnGap:{xs:"2rem",lg:"5rem"},mt:3,"& dl":{display:"inline-block",mt:0,mb:{lg:3}},"& dd":{ml:0,mt:{xs:1}}},children:n.sort(((e,t)=>e.term.toLowerCase()>t.term.toLowerCase())).map((e=>{let{term:t,definition:a}=e;return Object(y.jsxs)("dl",{children:[Object(y.jsx)("dt",{children:Object(y.jsx)("strong",{children:t})}),Object(y.jsx)("dd",{children:Object(y.jsx)(E.a,{dangerouslySetInnerHTML:{__html:Object(ce.d)(a)}})})]})}))})]}),false]})}var de=a(169),ue=a(446);const he=Object(de.a)({palette:{primary:{main:Object(f.c)(f.g,11)},secondary:{main:Object(f.c)(f.h,8)}},typography:{fontFamily:["Archivo","sans-serif"].join(",")}});function pe(){return Object(y.jsx)(ue.a,{theme:he,children:Object(y.jsx)(ie,{})})}const ge=document.getElementById("root");Object(r.render)(Object(y.jsx)(pe,{}),ge)},44:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return _})),a.d(t,"d",(function(){return s}));var r=a(6),n=a.n(r);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Number(e),t.cap?Math.min(e,Number(t.cap)):e},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),!isFinite(e))return"NA";if(t.cap&&e>Number(t.cap)){return">".concat(t.cap,"%")}e>100&&console.warn("Incorrect %");const a=t.decimals||0;return n.a.round(e,a).toString()+"%"},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),t.coarseFormatting){if(e>1e9)return n.a.round(e/1e9,1).toString()+" billion";if(e>1e6)return n.a.round(e/1e6,1).toString()+" million";if(e<100)return"<100";if(e<200)return"<200";if(e<500)return"<500";if(e<1e3)return"<1000";e=Number(e.toPrecision(2))}return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")},s=e=>e.replaceAll("<a ","<a target='_blank' rel='noopener noreferrer'")}},[[378,1,2]]]);
//# sourceMappingURL=main.df6d2568.chunk.js.map